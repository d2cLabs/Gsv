(function(){function n(n,i,r){var u=$("#main-tab");u.tabs("exists",n)?u.tabs("select",n):u.tabs("add",{title:n,closable:!0,icon:r,content:t(i)})}function t(n){return'<iframe scrolling="auto" frameborder="0" src="'+n+'" style="width:100%; height:99%"><\/iframe>'}function i(n,t){var h=$(n).data("tabTitle"),s=$("#main-tab"),u=s.tabs("tabs"),f=s.tabs("getTabIndex",s.tabs("getTab",h)),e=[],c,o,r,i;switch(t){case"tab-menu-refresh":o=$(".tabs-panels .panel").eq(f).find("iframe");o&&(c=o.attr("src"),o.attr("src",c));break;case"tab-menu-openFrame":o=$(".tabs-panels .panel").eq(f).find("iframe");o&&window.open(o.attr("src"));break;case"tab-menu-close":e.push(h);break;case"tab-menu-closeleft":if(f==0){mfx.notify.warn("左边没有可关闭标签。");return}for(i=0;i<f;i++)r=$(u[i]).panel("options"),r.closable&&e.push(r.title);break;case"tab-menu-closeright":if(f==u.length-1){mfx.notify.warn("右边没有可关闭标签。");return}for(i=f+1;i<u.length;i++)r=$(u[i]).panel("options"),r.closable&&e.push(r.title);break;case"tab-menu-closeother":for(i=0;i<u.length;i++)i!=f&&(r=$(u[i]).panel("options"),r.closable&&e.push(r.title));break;case"tab-menu-closeall":for(i=0;i<u.length;i++)r=$(u[i]).panel("options"),r.closable&&e.push(r.title)}for(i=0;i<e.length;i++)s.tabs("close",e[i])}$(function(){var r,t;for($("#main-tab").tabs({onContextMenu:function(n,t){n.preventDefault();$("#tab-menu").menu("show",{left:n.pageX,top:n.pageY}).data("tabTitle",t)}}),$("#tab-menu").menu({onClick:function(n){i(this,n.id)}}),r=document.getElementsByClassName("easyui-tree"),t=0;t<r.length;t++)$(r[t]).tree({onClick:function(t){n(t.text,t.attributes.url)}})})})();